schema: '2.0'
stages:
  download:
    cmd: python src/download.py data prod.artie.rocks 27017 artie_u ArtieU123! artie
    deps:
    - path: src/download.py
      md5: 6a294a8efad9cb62af438e05070e4eb7
      size: 2325
    outs:
    - path: data/pedagogicalinterventions.json
      md5: 7f6c83272096010ee38116a4458602d5
      size: 7019205
  transformation:
    cmd: python3 src/formatcsv.py data/pedagogicalinterventions.json data/pedagogicalinterventions.csv
    deps:
    - path: data/pedagogicalinterventions.json
      md5: 7f6c83272096010ee38116a4458602d5
      size: 7019205
    - path: src/formatcsv.py
      md5: 844be53d1f45247f8d6120ac357b2b70
      size: 9589
    outs:
    - path: data/pedagogicalinterventions.csv
      md5: c044976c49a4039842d10744c419236f
      size: 818697
  featureselection:
    cmd: python3 src/featureselection.py params.yaml data/pedagogicalinterventions.csv
      data/featureselection.csv data/selectedfeatures.csv
    deps:
    - path: data/pedagogicalinterventions.csv
      md5: c044976c49a4039842d10744c419236f
      size: 818697
    - path: src/featureselection.py
      md5: c5895b64d562124fd355ab0e76c37445
      size: 2721
    params:
      params.yaml:
        selection.drop_columns:
        - exercise_is_evaluation
        - valid_solution
        - finished_exercise
        - exercise_skill_paralellism
        - exercise_valid_solution
        - student_motivation
        selection.high_correlation: 0.9
        selection.method: filter
        selection.number_of_features: 50
        selection.target: request_help
    outs:
    - path: data/featureselection.csv
      md5: 5f3aea8607c21f4aa7a47c2f7a6785b9
      size: 653047
    - path: data/selectedfeatures.csv
      md5: b496c41af5c817b2aa2a3736bc90523c
      size: 441
  train:
    cmd: python3 src/train.py params.yaml data/featureselection.csv model/help_model.h5
      metrics/plots.csv metrics/scores.json
    deps:
    - path: data/featureselection.csv
      md5: 5f3aea8607c21f4aa7a47c2f7a6785b9
      size: 653047
    - path: src/train.py
      md5: 329960248c2f2c0bde554e815d842acd
      size: 6795
    params:
      params.yaml:
        model.dropout_value: 0.5
        model.lstm_units: 128
        model.mask_value: -1
        model.percentage_train_size: 70
        model.return_sequences: true
        model.second_lstm_layer: true
        model.training_batch_size: 1
        model.training_epochs: 50
        model.use_dropouts: true
    outs:
    - path: metrics/plots.csv
      md5: a4f2beefb6f38772e84996a026c0992a
      size: 4162
    - path: metrics/scores.json
      md5: fb05a71882a72bcf81a433af28ff7d69
      size: 135
    - path: model/help_model.h5
      md5: 33545c26caff9a394e2b0c9e302612a0
      size: 2523488
